## 网络分层模型

<img src="https://cdn.jsdelivr.net/gh/iamk123/typora@main/uPic/2023/08/24/095002169284180216928418024746GLbBr-image-20230824095002380.png" alt="image-20230824095002380" style="zoom:50%;" />

#### OSI七层模型是什么？每一层的作用是什么？

```
（1）应用层：为计算机用户提供服务，比如DNS、HTTP、FTP、SMTP、
（2）表示层：数据处理（编解码、加密解密、压缩解压缩）
（3）会话层：管理（建立、维护、重连）应用程序之间的会话
（4）传输层：为两台主机之间的通信提供通用的数据传输服务，如TCP、UDP
（5）网络层：路由和寻址，实现不同网络之间的路径选择，如IP协议
（6）数据链路层：将网络层传下来的IP数据包组装成帧，并在相邻节点的链路上传送帧
（7）物理层：实现相邻节点间比特流的透明传输，尽可能屏蔽传输介质和通信手段的差异
```

#### TCP/IP四层模型是什么？每一层的作用是什么？

```
是目前被广泛采用的一种模型，可以看作是OSI七层模型的精简版

（1）应用层：对应于 OSI 参考模型的（应用层、表示层、会话层）。
（2）传输层：
（3）网络层：
（4）网络接口层：与 OSI 参考模型的数据链路层、物理层对应。
```

#### 为什么网络要分层？

```
（1）模块化和解耦：每个层次负责特定的功能，各层之间通过定义好的接口进行通信，使得网络的设计更加模块化和解耦。一旦某个层次发生变化，不会对其他层次产生影响。
（2）可靠性和灵活性：分层结构使得网络功能相互独立，可以根据需要灵活地增加、删除或修改某个层次的功能，而不会对整个网络产生影响。
（3）可拓展性：可以新增新的层次或协议，以满足不断增长的网络需求，而无需对已有层次进行修改。
（4）通用性：可以通过使用标准的协议和接口，不同厂商的设备和应用可以更容易地进行互操作，实现通用性和互联互通
```











## PING

### PING 命令的作用是什么？

```
是一种常用的网络诊断工具，经常用来测试网络中主机之间的连通性和网络延迟
```

### PING 命令的工作原理是什么？

```
ICMP

TODO：https://javaguide.cn/cs-basics/network/other-network-questions.html#ping-命令的作用是什么
```



## DNS

### DNS 的作用是什么？

```
DNS是应用层协议，即域名管理系统，主要解决的是域名和ip地址的映射
```

### DNS 的解析过程

```
dns的查询解析过程分为两种模式：
（1）迭代
（2）递归
```

迭代

```
（1）查询浏览器缓存
（2）查询本地DNS缓存
（3）本地DNS请求发往「根域名服务器」，返回查询哪个「顶级域名服务器」
（4）本地DNS请求发往「顶级域名服务器」，返回查询哪个「权威域名服务器」
（5）本地DNS请求发往「权威域名服务器」，返回对应的IP地址

https://javaguide.cn/cs-basics/network/dns.html#dns-记录
```

假设你要查询 www.baidu.com 的 IP 地址:

```
（1）首先会查找浏览器的缓存,看看是否能找到 www.baidu.com 对应的 IP 地址， 找到就直接返回；否则进行下一步。
（2）将请求发往给本地 DNS 服务器，如果查找到也直接返回，否则继续进行下一 步；
（3）本地 DNS 服务器向「根域名服务器」发送请求，根域名服务器返回负责.com 的顶级域名服务器的 IP 地址的列表。
（4）本地 DNS 服务器再向其中一个负责.com 的顶级域名服务器发送一个请求，返回负责.baidu的权威域名服务器的 IP 地址列表。
（5）本地 DNS 服务器再向其中一个权威域名服务器发送一个请求，返回 www.baidu.com 所对应的 IP 地址。
```



### 从输入 URL 到页面展示到底发生了什么？

<img src="https://cdn.jsdelivr.net/gh/iamk123/typora@main/uPic/2023/08/24/09580516928422851692842285061yI5eBq-18450416927875041692787504619zXYQnH-url%E8%BE%93%E5%85%A5%E5%88%B0%E5%B1%95%E7%A4%BA%E5%87%BA%E6%9D%A5%E7%9A%84%E8%BF%87%E7%A8%8B.jpg" alt="img" style="zoom:50%;" />



```
（1）DNS解析：浏览器将URL中的主机名发送给本地DNS服务器，以获取对应的IP地址。本地DNS服务器查询全球分布的根DNS服务器，并逐步向下查询，直到查到目标域名对应的ip地址。
（2）TCP连接：浏览器根据获取到的IP地址，与服务器建立TCP连接
（3）发送HTTP请求：TCP建立连接后，浏览器会发送一个HTTP请求到服务器，请求获取网页的资源。HTTP请求包括请求方法、URL、请求头、请求体等。
（4）服务器处理请求并返回HTTP报文：服务器处理请求，并将生成的HTTP响应发送回浏览器。响应包括了状态码、响应头、响应体等信息。响应体中包含了请求的资源，比如html、css、图片等
（5）浏览器解析渲染页面
（6）TCP四次挥手，连接结束

https://javaguide.cn/cs-basics/network/other-network-questions.html#从输入-url-到页面展示到底发生了什么-非常重要
```



### 说说 WebSocket 与 socket 的区别

```
- Socket 其实就是等于 IP 地址 + 端口 + 协议。
具体来说，Socket 是一套标准，它完成了对 TCP/IP 的高度封装，屏蔽网络细 节，以方便开发者更好地进行网络编程。
- WebSocket 是一个持久化的协议，它是伴随 H5 而出的协议，用来解决 http 不 支持持久化连接的问题。 
- Socket 一个是网编编程的标准接口，而 WebSocket 则是应用层通信协议。
```



